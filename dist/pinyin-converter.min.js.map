{"version":3,"file":"pinyin-converter.min.js","sources":["../src/data-loader.ts","../src/utils.ts","../src/converter.ts","../src/index.ts"],"sourcesContent":[null,null,null,null],"names":["PinyinDataLoader","constructor","this","data","loaded","CJK_RANGES","getInstance","instance","loadData","loadMandarinData","loadPinyinData","console","log","Object","keys","length","error","Error","getData","mandarinData","loadTextFile","parseMandarinData","warn","pinyinData","parsePinyinData","path","window","response","fetch","ok","status","statusText","text","require","fs","fullPath","resolve","__dirname","readFileSync","lines","split","line","trimmedLine","trim","startsWith","match","unicode","toUpperCase","pinyins","map","p","filter","Set","isChinese","char","code","charCodeAt","some","start","end","charToUnicode","codePointAt","toString","padStart","PinyinUtils","toneMarkToNumber","pinyin","toneMap","result","toneNumber","toneMatch","toneChar","includes","numberToToneMark","base","toneStr","tone","parseInt","targetVowel","findToneVowel","replace","a","e","i","o","u","v","removeTone","join","vowels","vowel","formatPinyin","toneStyle","isValidPinyin","test","getInitial","charAt","comparePinyin","pinyin1","pinyin2","toLowerCase","PinyinConverter","dataLoaded","dataLoader","initialize","convert","options","results","chars","Array","from","convertChar","push","convertToString","separator","_a","heteronym","isHeteronym","getHeteronyms","getAvailablePinyins","allPinyins","values","forEach","add","sort","opts","keepTone","lowercase","nonChinese","replaceChar","handleNonChinese","origin","formattedPinyins","formatted","getInitials","getInitialsString","initials","countChinese","getAllHeteronyms","heteronyms","globalInstance","async","getPinyinConverter"],"mappings":"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"}